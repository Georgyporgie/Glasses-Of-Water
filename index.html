<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hydration Tracker</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link rel="stylesheet" href="style.css">
 <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 50px;
        background: linear-gradient(to bottom, #93c5fd, #dbeafe, #f0f9ff);


}
        .counter {
            font-size: 2em;
            margin: 20px;
        }
        button {
            padding: 10px 20px;
            font-size: 1em;
            margin: 5px;
        }
        canvas {
            max-width: 80%;
            margin: 20px auto;
        }
    </style>
</head>


<body>

    <h1 class="wator">Weekly Water Tracker</h1>
    <p>How many glasses of water have you had today?</p>
    <div class="counter" id="counter">0</div>
    <button onclick="logGlass()">Add a Glass</button>
    <button onclick="reset()">Reset</button>

    

<div class="glass-container">
    <div class="glass">
    <div class="water-fill" id="water"></div>

    </div>
    <p id="count"></p>
<p class="ml"> 300 ml.</p>

</div>



<br>
    <br>



<h2>Weekly History</h2>
   
    
    
    <canvas id="waterChart"></canvas>
<br>
<br>

<p id="weeklyAverageDisplay">ðŸ“Š weekly average: --</p>
    
<br>

<p id="dailyAverage">ðŸ“Š daily average: --</p>
<br>
<br>    
    <div id="trendSummary"></div>
    <canvas id="trendChart"></canvas>

   







 <script>
        let todayKey = new Date().toISOString().split("T")[0]; // Store using YYYY-MM-DD format
        let weeklyData = JSON.parse(localStorage.getItem("weeklyData")) || {};

        let count = weeklyData[todayKey] || 0;
        document.getElementById("counter").textContent = count;

        




function logGlass() {
            count++;
            weeklyData[todayKey] = count;
            localStorage.setItem("weeklyData", JSON.stringify(weeklyData));
            document.getElementById("counter").textContent = count;
            updateGlass(); 
            updateCharts();
            getWeeklyAverage();
getDailyAverage();
            

          
}

       

function updateGlass() {
    let water = document.getElementById("water");
    let counter = document.getElementById("count");

    if (water && counter) {
        let percentage = (count / 8) * 100;
        water.style.height = percentage + "%"; // Fill the glass
        counter.textContent = `${count} / 8 glasses`; // Ensures display starts correctly
    } else {
        console.error("Water or count element not found!");
    }
 
updateGlass();
}









 function reset() {
            count = 0;
            weeklyData[todayKey] = count;
            localStorage.setItem("weeklyData", JSON.stringify(weeklyData));
            document.getElementById("counter").textContent = count;
            updateCharts();
        }

        function getDailyAverage() {
            let totalGlasses = Object.values(weeklyData).reduce((sum, num) => sum + num, 0);
            let daysTracked = Object.values(weeklyData).filter(num => num > 0).length;

            let avgDaily = daysTracked > 0 ? (totalGlasses / daysTracked).toFixed(2) : 0;
            document.getElementById("dailyAverage").textContent = `Daily Average: ${avgDaily} glasses`;
        }

        function getWeeklyAverage() {
            let totalGlasses = Object.values(weeklyData).reduce((sum, val) => sum + val, 0);
            let weeklyAvg = (totalGlasses / 7).toFixed(1);
            document.getElementById("weeklyAverageDisplay").textContent = `ðŸ“Š Weekly Average: ${weeklyAvg} glasses/day`;
        }

function updateCharts() {
    const ctx = document.getElementById("waterChart").getContext("2d");
    const chartData = Object.keys(weeklyData).map(date => weeklyData[date] || 0);

    const daysOfWeek = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
    const labels = Object.keys(weeklyData).map(date => {
        let day = new Date(date).getDay();
        return daysOfWeek[day]; 
    });

    new Chart(ctx, {
        type: 'bar',
        data: {
            labels: labels,
            datasets: [{
                label: "Glasses of Water",
                data: chartData,
                backgroundColor: "rgba(0, 123, 255, 0.5)",
                borderColor: "rgba(0, 123, 255, 1)",
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            scales: { y: { beginAtZero: true, max: 12 } }
        }
    });
}


        // Initial calculations on page load
        getDailyAverage();
        getWeeklyAverage();
        updateCharts();
 
</script>

<script>
window.onload = function() {
    let todayKey = new Date().toISOString().split("T")[0]; 
    let weeklyData = JSON.parse(localStorage.getItem("weeklyData")) || {};

    checkReset(); 

    let count = weeklyData[todayKey] || 0;

    let counterElement = document.getElementById("counter");
    
    if (count > 0) {
        counterElement.textContent = count; 
        counterElement.style.visibility = "visible"; 
    } else {
        counterElement.style.visibility = "hidden"; 
    }

    updateGlass();
    getDailyAverage();
    getWeeklyAverage();
    updateCharts();
};



</script>
<script>
function checkReset() {
    let today = new Date();
    let dayOfWeek = today.getDay(); // Sunday is 0

    if (dayOfWeek === 0) { // If it's Sunday, reset weekly data
        weeklyData = {}; 
        localStorage.setItem("weeklyData", JSON.stringify(weeklyData));
        document.getElementById("counter").textContent = 0;
        updateCharts();
    }
}

// Call this function on page load
window.onload = function() {
       updateGlass();    
checkReset(); 
   
    getWeeklyAverage();
    getDailyAverage();

updateCharts();



};

</script>

<script>








</body>
</html>
